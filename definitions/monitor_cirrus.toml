[metrics]

[metrics.monitor_pageviews_v1]
data_source = "monitor_events_v1"
select_expression = "SUM(dau)"
type = "scalar"
friendly_name = "Monitor Page Views"
description = """
    This is a metric intended to test the functionality of Cirrus within Monitor.
    It simply sums the page view events for Monitor.
"""
owner = ["mwilliams@mozilla.com"]
deprecated = false

[data_sources]

[data_sources.monitor_events_v1]
from_expression = """(
    SELECT
        e.* EXCEPT (events),
        mozfun.map.get_key(event.extras, 'user_id') as client_id
    FROM
        `moz-fx-data-shared-prod.monitor_frontend.events` e
    CROSS JOIN
    	UNNEST(p.events) AS event
)"""
experiments_column_type = "glean"
friendly_name = "Monitor Events"
description = "Monitor Events"
