## EXPERIMENT SPECIFIC
[experiment]

start_date = "2024-02-27"
enrollment_end_date = "2024-03-08"


[experiment.exposure_signal]
name = "nimbus_exposure"
friendly_name = "Nimbus Exposure"
description = "users who browsed in private mode"
data_source = "open_private_mode"
select_expression = "COALESCE((event_name = 'private_browsing_icon_tapped') OR (event_name = 'private_browsing_button_tapped' AND ext.value = 'true'), FALSE)"


[data_sources.open_private_mode]
from_expression = """(
SELECT 
    client_info.client_id,
    DATE(events.submission_timestamp) AS submission_date,
    event_name, 
    ext
FROM `mozdata.firefox_ios.events_unnested`  AS events
CROSS JOIN UNNEST(events.event_extra) AS ext
WHERE 
    events.event_category IN ('tabs_tray', 'preferences')
    AND events.normalized_channel  = 'release'
    AND DATE(events.submission_timestamp) BETWEEN "2024-02-27" AND "2024-03-08"
)"""
